<!DOCTYPE html><html lang="fr-FR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Les design patternsÂ - les bons Legos pour vos applications .NET" /><meta property="og:locale" content="fr_FR" /><meta name="description" content="IntroductionÂ : Ne rÃ©inventez pas la roue, assemblez les Legos" /><meta property="og:description" content="IntroductionÂ : Ne rÃ©inventez pas la roue, assemblez les Legos" /><link rel="canonical" href="https://codewithfrenchy.github.io//posts/utilisation-design-patterns/" /><meta property="og:url" content="https://codewithfrenchy.github.io//posts/utilisation-design-patterns/" /><meta property="og:site_name" content="CodeWithFrenchy" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-09-22T10:00:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Les design patternsÂ - les bons Legos pour vos applications .NET" /><meta name="twitter:site" content="@alexis35115" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-09-22T10:00:00-04:00","datePublished":"2025-09-22T10:00:00-04:00","description":"IntroductionÂ : Ne rÃ©inventez pas la roue, assemblez les Legos","headline":"Les design patternsÂ - les bons Legos pour vos applications .NET","mainEntityOfPage":{"@type":"WebPage","@id":"https://codewithfrenchy.github.io//posts/utilisation-design-patterns/"},"url":"https://codewithfrenchy.github.io//posts/utilisation-design-patterns/"}</script><title>Les design patternsÂ - les bons Legos pour vos applications .NET | CodeWithFrenchy</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="CodeWithFrenchy"><meta name="application-name" content="CodeWithFrenchy"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/53872142?s=400&u=53187283fe05254234a3890e2b44134f96e3a833&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">CodeWithFrenchy</a></div><div class="site-subtitle font-italic">Architecte logiciel, audacieux et fermier</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>ACCUEIL</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATÃ‰GORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>Ã€ PROPOS DE</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/alexis35115" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/alexis35115" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/alexis-garon-michaud-a59643219/" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Accueil </a> </span> <span>Les design patternsÂ - les bons Legos pour vos applications .NET</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Recherche..."> </span> <span id="search-cancel" >Annuler</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Les design patternsÂ - les bons Legos pour vos applications .NET</h1><div class="post-meta text-muted"> <span> PostÃ© <em class="" data-ts="1758549600" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 22/09/2025 </em> </span><div class="d-flex justify-content-between"> <span> Par <em> <a href="https://twitter.com/alexis35115">Alexis Garon-Michaud</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5563 mots"> <em>30 min</em> Ã  lire</span></div></div></div><div class="post-content"><h2 id="introduction-ne-rÃ©inventez-pas-la-roue-assemblez-les-legos"><span class="mr-2">IntroductionÂ : Ne rÃ©inventez pas la roue, assemblez les Legos</span><a href="#introduction-ne-rÃ©inventez-pas-la-roue-assemblez-les-legos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>En conception logicielle, un <strong>design pattern</strong> (ou patron de conception) est une solution Ã©prouvÃ©e Ã  un problÃ¨me de conception rÃ©current. Ce sont en quelque sorte nos <strong>briques de Lego</strong> Ã  nous, dÃ©veloppeursÂ : plutÃ´t que de tailler chaque piÃ¨ce dans le bois, on pioche dans la boÃ®te le composant adaptÃ© au bon moment. Bien comprendre ces patterns permet dâ€™assembler des systÃ¨mes plus robustes et Ã©volutifs, un peu comme construire un chÃ¢teau de Lego solide sans recoller les briques au chewing-gum. ğŸ˜‰</p><p>En dâ€™autres termes, les design patterns nous Ã©vitent de <strong>rÃ©inventer la roue</strong> sur chaque projet. Ils dÃ©finissent des structures de classes ou dâ€™objets qui ont fait leurs preuves. Par exemple, <em>le Singleton sâ€™assure de lâ€™existence dâ€™un seul objet de son genre et fournit un point dâ€™accÃ¨s global Ã  celui-ci</em>. Utiliser un pattern appropriÃ© au bon contexte, câ€™est comme choisir la bonne piÃ¨ce Lego standard plutÃ´t que de mouler la vÃ´tre. Cela accÃ©lÃ¨re le dÃ©veloppement et amÃ©liore la maintenabilitÃ©, tout en respectant les principes <a href="https://en.wikipedia.org/wiki/SOLID">SOLID</a>.</p><p>Avant de plonger dans sept patterns importants pour les applications de gestion en .NET Core, mentionnons une excellente ressourceÂ : la <a href="https://www.youtube.com/watch?v=v9ejT8FO-7I&amp;list=PLrhzvIcii6GNjpARdnO4ueTUAVR9eMBpc">sÃ©rie</a> de vidÃ©os de <strong>Christopher Okhravi</strong> sur les design patterns (disponible sur YouTube). Elle reste encore aujourdâ€™hui une rÃ©fÃ©rence pÃ©dagogique (et humoristique) sur le sujet. Vous verrez quâ€™avec un peu de pratique, les design patterns deviendront vos alliÃ©s du quotidien pour structurer proprement un code mÃ©tier (facturation, inventaire, etc.) sans transformer votre code en plat de spaghetti. ğŸ</p><p>Nous allons explorer les patterns suivants, avec pour chacun une explication, un exemple concret, un extrait de code C#, les cas dâ€™usage Ã  favoriser (et Ã  Ã©viter), ainsi que des astuces dâ€™intÃ©gration en .NET (notamment via lâ€™IoC container et autres outils comme <strong>Scrutor</strong> pour le pattern Decorator).</p><p>En pisteÂ !</p><h2 id="singleton-un-seul-pour-les-gouverner-tous-un-seul-pour-les-instancier"><span class="mr-2">SingletonÂ : Un seul pour les gouverner tous, un seul pour les instancier,</span><a href="#singleton-un-seul-pour-les-gouverner-tous-un-seul-pour-les-instancier" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>Le pattern Singleton garantit quâ€™une classe nâ€™a quâ€™une seule instance accessible globalement.</em></p><p>Le Singleton est le Highlander des patternsÂ : <em>Â«Â There can be only one!Â Â»</em> ğŸ˜… Son objectif est de restreindre lâ€™instanciation dâ€™une classe Ã  un seul objet, partagÃ© et accessible partout. Dans une application de gestion, on utilise souvent ce pattern pour des objets qui doivent Ãªtre uniquesÂ : par exemple un <strong>gestionnaire de configuration global</strong>, une <strong>cache en mÃ©moire</strong> ou encore un <strong>logger</strong> central. Cela Ã©vite dâ€™avoir plusieurs copies incohÃ©rentes de ces ressources critiques dissÃ©minÃ©es un peu partout.</p><h3 id="exemple-concret"><span class="mr-2">Exemple concret</span><a href="#exemple-concret" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Imaginons un systÃ¨me de facturation qui doit accÃ©der aux paramÃ¨tres de configuration (taux de TVQ, devise, etc.) depuis nâ€™importe quel module. On pourrait crÃ©er une classe <code class="language-plaintext highlighter-rouge">ConfigurationManager</code> en Singleton. Ainsi, que ce soit le module de gÃ©nÃ©ration de facture ou le module dâ€™inventaire, tous rÃ©cupÃ¨rent la mÃªme instance unique du <code class="language-plaintext highlighter-rouge">ConfigurationManager</code> avec les paramÃ¨tres chargÃ©s au lancement de lâ€™application.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">ConfigurationManager</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">ConfigurationManager</span> <span class="n">_instance</span> <span class="p">=</span> <span class="k">new</span><span class="p">();</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">ConfigurationManager</span> <span class="n">Instance</span> <span class="p">=&gt;</span> <span class="n">_instance</span><span class="p">;</span>

    <span class="c1">// DonnÃ©es de configuration (exemple)</span>
    <span class="k">public</span> <span class="kt">decimal</span> <span class="n">TauxTVQ</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">DeviseParDefaut</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="c1">// Constructeur privÃ© pour empÃªcher les instanciations externes</span>
    <span class="k">private</span> <span class="nf">ConfigurationManager</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Simulation de chargement depuis une source de vÃ©ritÃ© (fichier, base, ou grimoire fiscal)</span>
        <span class="n">TauxTVQ</span> <span class="p">=</span> <span class="m">0.09975m</span><span class="p">;</span> <span class="c1">// TVQ actuelle au QuÃ©bec</span>
        <span class="n">DeviseParDefaut</span> <span class="p">=</span> <span class="s">"CAD"</span><span class="p">;</span> <span class="c1">// Vive le dollar canadien!</span>
    <span class="p">}</span>

    <span class="c1">// MÃ©thode d'accÃ¨s optionnelle</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">ConfigurationManager</span> <span class="nf">GetInstance</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">Instance</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Dans le code ci-dessus, <code class="language-plaintext highlighter-rouge">ConfigurationManager.Instance</code> renverra toujours la mÃªme instance, initialisÃ©e une seule fois. On dÃ©clare le constructeur en <code class="language-plaintext highlighter-rouge">private</code> pour empÃªcher de faire <code class="language-plaintext highlighter-rouge">new ConfigurationManager()</code>. Seule la propriÃ©tÃ© statique <code class="language-plaintext highlighter-rouge">Instance</code> permet dâ€™obtenir lâ€™objet unique.</p><p><strong>Quand lâ€™utiliser ğŸŸ¢ :</strong> Lorsquâ€™une seule instance dâ€™un service doit exister et Ãªtre partagÃ©e partout. Exemples classiquesÂ : configuration globale, journalisation (logging), connexion unique Ã  une base de donnÃ©es, cache applicatif. Cela permet de centraliser un Ã©tat ou un accÃ¨s et dâ€™Ã©viter les duplications.</p><p><strong>Ã€ Ã©viter ğŸ”´ :</strong> Nâ€™abusez pas du Singletonâ€¯! Un Singleton mal placÃ© peut devenir un <em>god object</em> omniprÃ©sent qui rend le code difficile Ã  tester (dÃ©pendances globales cachÃ©es) et moins modulable. Si plusieurs instances seraient acceptables ou que lâ€™objet a un cycle de vie limitÃ©, prÃ©fÃ©rez des instances normales gÃ©rÃ©es par injection de dÃ©pendances. En .NET, beaucoup considÃ¨rent dâ€™ailleurs le Singleton comme un <em>antipattern</em> si utilisÃ© Ã  tort et Ã  travers.</p><p><strong>IntÃ©gration .NET ğŸ‘©â€ğŸ’» :</strong> PlutÃ´t que dâ€™implÃ©menter le Singleton â€œÃ  la mainâ€ comme ci-dessus, on profite souvent du conteneur dâ€™inversion de contrÃ´le (IoC) de .NET. En enregistrant une classe en <em>singleton</em> dans le container, le framework garantit lui-mÃªme lâ€™unicitÃ© de lâ€™instance. Par exemple, dans le <code class="language-plaintext highlighter-rouge">Program.cs</code>Â :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">services</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">IConfigurationManager</span><span class="p">,</span> <span class="n">ConfigurationManager</span><span class="p">&gt;();</span>
</pre></table></code></div></div><p>Ici le container va crÃ©er une seule instance de <code class="language-plaintext highlighter-rouge">ConfigurationManager</code> pour toute lâ€™application. Câ€™est thread-safe et plus simple Ã  tester (on peut Ã©ventuellement substituer lâ€™implÃ©mentation via lâ€™interface). <strong>Astuce:</strong> Si votre Singleton est lourd Ã  instancier et pas toujours utilisÃ©, envisagez le pattern du Lazy Singleton (instanciation diffÃ©rÃ©e).</p><h2 id="factory-fabrique-dobjets-Ã©vitez-le-new"><span class="mr-2">FactoryÂ : Fabrique dâ€™objets, Ã©vitez le <strong>new</strong></span><a href="#factory-fabrique-dobjets-Ã©vitez-le-new" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>Le pattern Factory (ici la Factory Method) crÃ©e des objets selon le type demandÃ© sans exposer la logique de crÃ©ation.</em></p><p>Le pattern <strong>Factory</strong> est un patron de crÃ©ation qui repose sur le principe suivantÂ : <em>Â«â€¯Ne dites pas <code class="language-plaintext highlighter-rouge">new</code>, dites <code class="language-plaintext highlighter-rouge">Factory</code>!â€¯Â»</em>. PlutÃ´t que dâ€™instancier directement des classes dans votre code (ce qui le couplerait Ã  des implÃ©mentations concrÃ¨tes), vous dÃ©lÃ©guez cette tÃ¢che Ã  une <strong>fabrique</strong>. La Factory centralise la logique de crÃ©ation et peut dÃ©cider quel sous-type concret retourner en fonction du contexte. Câ€™est un peu comme une usine qui, sur base dâ€™une commande, sort le bon produit de la chaÃ®ne sans que lâ€™acheteur ne sache exactement comment il a Ã©tÃ© fabriquÃ©.</p><h3 id="exemple-concret-1"><span class="mr-2">Exemple concret</span><a href="#exemple-concret-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Dans un systÃ¨me de gestion documentaire (factures, bons de commande, devis, etc.), on peut avoir une interface commune <code class="language-plaintext highlighter-rouge">IDocument</code> et plusieurs implÃ©mentations (<code class="language-plaintext highlighter-rouge">Facture</code>, <code class="language-plaintext highlighter-rouge">Devis</code>, <code class="language-plaintext highlighter-rouge">BonCommande</code>â€¦). Au lieu dâ€™Ã©parpiller du code <code class="language-plaintext highlighter-rouge">new Facture()</code> partout, on dÃ©finit une factory qui va produire le bon type de document selon un paramÃ¨tre. Par exemple, une mÃ©thode <code class="language-plaintext highlighter-rouge">DocumentFactory.CreateDocument(TypeDocument type)</code> qui retourne un <code class="language-plaintext highlighter-rouge">IDocument</code> :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="c1">// Type Ã©numÃ©rÃ© pour les diffÃ©rents documents possibles</span>
<span class="k">public</span> <span class="k">enum</span> <span class="n">TypeDocument</span>
<span class="p">{</span> 
   <span class="n">Facture</span><span class="p">,</span>
   <span class="n">Devis</span><span class="p">,</span>
   <span class="n">BonCommande</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">interface</span> <span class="nc">IDocument</span> 
<span class="p">{</span> 
    <span class="kt">string</span> <span class="n">Numero</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
    <span class="n">DateTime</span> <span class="n">DateEmission</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">// ... autres membres communs</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Facture</span> <span class="p">:</span> <span class="n">IDocument</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Devis</span> <span class="p">:</span> <span class="n">IDocument</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BonCommande</span> <span class="p">:</span> <span class="n">IDocument</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">DocumentFactory</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">IDocument</span> <span class="nf">CreateDocument</span><span class="p">(</span><span class="n">TypeDocument</span> <span class="n">type</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">type</span> <span class="k">switch</span> 
        <span class="p">{</span>
            <span class="n">TypeDocument</span><span class="p">.</span><span class="n">Facture</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">Facture</span><span class="p">(),</span>
            <span class="n">TypeDocument</span><span class="p">.</span><span class="n">Devis</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">Devis</span><span class="p">(),</span>
            <span class="n">TypeDocument</span><span class="p">.</span><span class="n">BonCommande</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">BonCommande</span><span class="p">(),</span>
            <span class="n">_</span> <span class="p">=&gt;</span> <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentException</span><span class="p">(</span><span class="s">"Type de document inconnu"</span><span class="p">)</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Ici, le <code class="language-plaintext highlighter-rouge">DocumentFactory</code> expose une mÃ©thode statique de crÃ©ation. Le client appelle par exemple <code class="language-plaintext highlighter-rouge">IDocument doc = DocumentFactory.CreateDocument(TypeDocument.Facture);</code> pour obtenir une facture prÃªte Ã  lâ€™emploi, sans savoir <em>quelle classe concrÃ¨te</em> est instanciÃ©e. Si demain on ajoute un nouveau type de document (par exemple un avoir), il suffit dâ€™Ã©tendre la factory sans impacter le code client.</p><p><strong>Quand lâ€™utiliser ğŸŸ¢ :</strong> Quand la logique dâ€™instanciation est <em>complexe</em> ou <em>conditionnelle</em>. Par exemple, si la crÃ©ation dâ€™un objet dÃ©pend de paramÃ¨tres (contexte utilisateur, configuration) ou nÃ©cessite de dÃ©cider parmi plusieurs types dÃ©rivÃ©s. Les Factories amÃ©liorent la lisibilitÃ© (on donne un nom explicite au processus de crÃ©ation) et centralisent en un seul endroit le code qui fait des <code class="language-plaintext highlighter-rouge">new</code>. TrÃ¨s utile pour :</p><ul><li><strong>Factory Method</strong>Â : laisser des sous-classes dÃ©cider de lâ€™instanciation (patron utilisÃ© dans les frameworks, par exemple pour crÃ©er des contrÃ´les UI spÃ©cifiques).<li><strong>Abstract Factory</strong>Â : groupe de factories pour crÃ©er des familles dâ€™objets liÃ©s (exemple une AbstractFactory pour GUI qui peut produire <em>soit</em> des boutons et fenÃªtres version â€œWindowsâ€, <em>soit</em> version â€œmacOSâ€).</ul><p><strong>Ã€ Ã©viter ğŸ”´ :</strong> Si la crÃ©ation de lâ€™objet est triviale et ne nÃ©cessite pas de logique conditionnelle, une factory ajoute une complexitÃ© inutile. Inutile de sur-ingÃ©nierie : on ne va pas faire une factory pour instancier un simple DTO par exemple. De plus, trop de factories peuvent rendre le code abstrait Ã  lâ€™excÃ¨s (on finit par avoir des usines qui fabriquent dâ€™autres usinesâ€¦). Comme toujours, dosez le pattern oÃ¹ il apporte une rÃ©elle valeur.</p><p><strong>IntÃ©gration .NET ğŸ‘©â€ğŸ’» :</strong> Les IoC containers rÃ©duisent parfois le besoin explicite de factory, car ils peuvent eux-mÃªmes choisir quelle implÃ©mentation injecter selon la configuration. Par exemple, on peut enregistrer plusieurs implÃ©mentations dâ€™une interface et en sÃ©lectionner une par nom ou via une factory lambda dans le container. NÃ©anmoins, le pattern Factory reste utile pour crÃ©er des objets <strong>mÃ©tiers</strong> complexes.</p><p>En .NET Core, vous pouvez aussi injecter une <em>factory</em> sous forme de fonction. Ex: <code class="language-plaintext highlighter-rouge">Func&lt;TypeDocument, IDocument&gt;</code> que lâ€™IoC pourrait construire. Une autre approche est dâ€™utiliser la factory en tant que serviceÂ : vous crÃ©ez une classe <code class="language-plaintext highlighter-rouge">DocumentFactory</code> (non statique) enregistrÃ©e en singleton, et qui a peut-Ãªtre besoin dâ€™autres services (elle peut les recevoir via injection dans son constructeur) pour fabriquer les objets. Cette technique vous permet par exemple de choisir lâ€™implÃ©mentation en fonction de donnÃ©es Ã  lâ€™exÃ©cution (on le verra avec le patron Strategy juste aprÃ¨s).</p><h2 id="strategy-des-algorithmes-interchangeables-choisis-Ã -la-volÃ©e"><span class="mr-2">StrategyÂ : des algorithmes interchangeables, choisis Ã  la volÃ©e</span><a href="#strategy-des-algorithmes-interchangeables-choisis-Ã -la-volÃ©e" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>Le pattern Strategy dÃ©finit des algorithmes interchangeables. Le contexte dÃ©lÃ¨gue Ã  une stratÃ©gie concrÃ¨te (<code class="language-plaintext highlighter-rouge">ConcreteStrategyA ou ConcreteStrategyB</code>) choisie dynamiquement.</em></p><p>Le pattern <strong>Strategy</strong> permet de dÃ©finir une famille dâ€™algorithmes, de les encapsuler chacun dans une classe distincte, et de les rendre <strong>interchangeables Ã  la volÃ©e</strong> dans le contexte oÃ¹ ils sont utilisÃ©s. En clair, on sÃ©pare le <em>quoi</em> (lâ€™algorithme Ã  exÃ©cuter) du <em>quand/comment</em> il est utilisÃ©.</p><p>Lâ€™un des grands bÃ©nÃ©fices de ce pattern est quâ€™il <strong>respecte le principe dâ€™ouverture/fermeture</strong> (<em>Open/Closed Principle</em>) : votre code est <strong>ouvert Ã  lâ€™extension</strong>, mais <strong>fermÃ© Ã  la modification</strong>. Autrement dit, si un jour un nouveau mode de calcul doit Ãªtre ajoutÃ© (par exemple une livraison par drone ğŸ›¸), pas besoin de toucher au calculateur existant : on ajoute une nouvelle stratÃ©gie, et câ€™est tout.</p><p>Câ€™est une alternative Ã©lÃ©gante et maintenable aux chaÃ®nes de <code class="language-plaintext highlighter-rouge">if/else</code> ou de <code class="language-plaintext highlighter-rouge">switch</code> sur des <code class="language-plaintext highlighter-rouge">enums</code>, qui violent souvent ce principe (car chaque ajout nÃ©cessite de modifier le bloc conditionnel existant). Avec le patron Strategy, on <strong>Ã©tend</strong> le comportement en ajoutant une nouvelle classe, plutÃ´t quâ€™en modifiant du code existant â€” ce qui rÃ©duit les risques de rÃ©gression.</p><h3 id="exemple-concret-2"><span class="mr-2">Exemple concret</span><a href="#exemple-concret-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Dans une application de gestion de commerce en ligne, prenons le calcul des <strong>frais de livraison</strong>. Selon le mode dâ€™expÃ©dition choisi par le client, le calcul du coÃ»t diffÃ¨re (transporteur standard, express, retrait en magasin gratuit, etc.). Sans pattern, on aurait peut-Ãªtre dans la classe Commande un code semblable Ã Â :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kt">decimal</span> <span class="n">frais</span> <span class="p">=</span> <span class="n">mode</span> <span class="k">switch</span>
<span class="p">{</span>
    <span class="s">"Standard"</span> <span class="p">=&gt;</span> <span class="nf">CalculerStandard</span><span class="p">(),</span>
    <span class="s">"Express"</span> <span class="p">=&gt;</span> <span class="nf">CalculerExpress</span><span class="p">(),</span>
    <span class="s">"Magasin"</span> <span class="p">=&gt;</span> <span class="m">0</span><span class="p">,</span>
    <span class="n">_</span> <span class="p">=&gt;</span> <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">()</span>
<span class="p">};</span>
<span class="p">...</span>
</pre></table></code></div></div><p>Avec le patron Strategy, on va crÃ©er une interface <code class="language-plaintext highlighter-rouge">IFraisLivraisonStrategy</code> avec une mÃ©thode <code class="language-plaintext highlighter-rouge">CalculerFrais(Commande commande)</code>. Puis on implÃ©mente une classe concrÃ¨te par modeÂ : <code class="language-plaintext highlighter-rouge">StandardStrategy</code>, <code class="language-plaintext highlighter-rouge">ExpressStrategy</code>, <code class="language-plaintext highlighter-rouge">RetraitMagasinStrategy</code>, etc., chacune encapsulant son calcul. Le contexte (par exemple la classe <code class="language-plaintext highlighter-rouge">CalculateurLivraison</code>) utilise une rÃ©fÃ©rence Ã  <code class="language-plaintext highlighter-rouge">IFraisLivraisonStrategy</code>.</p><p>On peut pousser plus loin en combinant avec une Factory Method pour choisir la stratÃ©gie en fonction de la commandeÂ :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="c1">// StratÃ©gie de calcul des frais de livraison</span>
<span class="k">public</span> <span class="k">interface</span> <span class="nc">IFraisLivraisonStrategy</span> 
<span class="p">{</span>
    <span class="kt">decimal</span> <span class="nf">CalculerFrais</span><span class="p">(</span><span class="n">Commande</span> <span class="n">cmd</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// ImplÃ©mentations concrÃ¨tes</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">LivraisonStandard</span> <span class="p">:</span> <span class="n">IFraisLivraisonStrategy</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">decimal</span> <span class="nf">CalculerFrais</span><span class="p">(</span><span class="n">Commande</span> <span class="n">cmd</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="m">5m</span><span class="p">;</span> <span class="c1">// Forfait simple</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">LivraisonExpress</span> <span class="p">:</span> <span class="n">IFraisLivraisonStrategy</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">decimal</span> <span class="nf">CalculerFrais</span><span class="p">(</span><span class="n">Commande</span> <span class="n">cmd</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">cmd</span><span class="p">.</span><span class="n">Poids</span> <span class="p">*</span> <span class="m">1.5m</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">RetraitMagasin</span> <span class="p">:</span> <span class="n">IFraisLivraisonStrategy</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">decimal</span> <span class="nf">CalculerFrais</span><span class="p">(</span><span class="n">Commande</span> <span class="n">cmd</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="m">0m</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Contexte qui utilise une stratÃ©gie</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">CalculateurLivraison</span> 
<span class="p">{</span>
    <span class="k">private</span> <span class="n">IFraisLivraisonStrategy</span> <span class="n">_strategie</span><span class="p">;</span>

    <span class="c1">// On devrait injecter la stratÃ©gie via le constructeur !</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">ChoisirStrategie</span><span class="p">(</span><span class="n">IFraisLivraisonStrategy</span> <span class="n">strat</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">_strategie</span> <span class="p">=</span> <span class="n">strat</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">decimal</span> <span class="nf">CalculerFrais</span><span class="p">(</span><span class="n">Commande</span> <span class="n">cmd</span><span class="p">)</span> <span class="p">=&gt;</span> 
        <span class="k">return</span> <span class="n">_strategie</span><span class="p">?.</span><span class="nf">CalculerFrais</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span> <span class="p">??</span>
           <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidOperationException</span><span class="p">(</span><span class="s">"StratÃ©gie non dÃ©finie."</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Et quelque part dans le code appelant (par exemple lors de la finalisation de la commande)Â :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kt">var</span> <span class="n">calculateur</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CalculateurLivraison</span><span class="p">();</span>

<span class="n">IFraisLivraisonStrategy</span> <span class="n">strategie</span> <span class="p">=</span> <span class="n">modeChoisi</span> <span class="k">switch</span> 
<span class="p">{</span>
    <span class="s">"Standard"</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">LivraisonStandard</span><span class="p">(),</span>
    <span class="s">"Express"</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">LivraisonExpress</span><span class="p">(),</span>
    <span class="s">"Magasin"</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">RetraitMagasin</span><span class="p">(),</span>
    <span class="n">_</span> <span class="p">=&gt;</span> <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidOperationException</span><span class="p">(</span><span class="s">"Mode inconnu"</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">calculateur</span><span class="p">.</span><span class="nf">ChoisirStrategie</span><span class="p">(</span><span class="n">strategie</span><span class="p">);</span>
<span class="kt">decimal</span> <span class="n">frais</span> <span class="p">=</span> <span class="n">calculateur</span><span class="p">.</span><span class="nf">CalculerFrais</span><span class="p">(</span><span class="n">commande</span><span class="p">);</span>
</pre></table></code></div></div><p>Ici, on choisit la stratÃ©gie dynamiquement en fonction dâ€™un paramÃ¨tre <code class="language-plaintext highlighter-rouge">modeChoisi</code>. Le calculateur de livraison nâ€™a pas besoin de connaÃ®tre les dÃ©tails de chaque mode, il dÃ©lÃ¨gue Ã  la stratÃ©gie. Si un jour on ajoute un mode Drone ou Ã  dos de vache ğŸ®, on crÃ©e une nouvelle classe implÃ©mentant <code class="language-plaintext highlighter-rouge">IFraisLivraisonStrategy</code> et on ajuste la sÃ©lection (idÃ©alement via une factory au lieu dâ€™un switch inline).</p><p><strong>Quand lâ€™utiliser ğŸŸ¢ :</strong> Quand vous avez plusieurs variantes algorithmiques interchangeables selon un critÃ¨re (par exemple, diffÃ©rents <em>rÃ¨gles de calcul</em>, <em>politiques</em>, <em>stratÃ©gies de tarification</em>, etc.). Le Strategy apporte de la flexibilitÃ©Â : on peut mÃªme changer la stratÃ©gie en cours dâ€™exÃ©cution si besoin. Câ€™est aussi un bon moyen dâ€™adhÃ©rer au principe <em>Open/Closed</em> â€“ ajouter une nouvelle stratÃ©gie nâ€™impacte pas les existantes ni le contexte.</p><p><strong>Ã€ Ã©viter ğŸ”´ :</strong> Si vos variantes dâ€™algorithmes sont trÃ¨s simples ou quâ€™il nâ€™y en a quâ€™une ou deux peu susceptibles dâ€™Ã©voluer, le pattern peut Ãªtre overkill. Aussi, nâ€™introduisez pas une stratÃ©gie juste pour Ã©viter un <code class="language-plaintext highlighter-rouge">if</code> unique â€” le remÃ¨de serait pire que le mal. Enfin, veillez Ã  ce que les stratÃ©gies partagent bien la mÃªme interface commune et puissent rÃ©ellement varier indÃ©pendamment du resteÂ : si elles finissent par dÃ©pendre fortement du contexte externe, le gain de dÃ©couplage diminue.</p><p><strong>IntÃ©gration .NET ğŸ‘©â€ğŸ’» :</strong> On peut tirer parti de lâ€™IoC container pour gÃ©rer les stratÃ©gies. Par exemple, vous pourriez <strong>injecter toutes les implÃ©mentations</strong> dâ€™une interface et sÃ©lectionner la bonne Ã  lâ€™exÃ©cution (via un dictionnaire de stratÃ©gies, ou en taguant chaque implÃ©mentation dâ€™un <code class="language-plaintext highlighter-rouge">attribut</code> \ <code class="language-plaintext highlighter-rouge">[Strategy("Nom")])</code>. Une autre approche consiste Ã  enregistrer une Factory (comme vue plus haut) dans lâ€™IoC qui retourne la stratÃ©gie voulue. .NET Core facilite mÃªme cela avec les <em>Named Options</em> ou en combinant avec le pattern <strong>Policy</strong>. Bref, le patron Strategy se marie bien avec lâ€™injection de dÃ©pendances pour Ã©viter de faire de <code class="language-plaintext highlighter-rouge">new</code> manuellement : on peut demander au container de rÃ©soudre la stratÃ©gie dont on a besoin, ce qui simplifie le remplacement (ex: injection dâ€™une fausse stratÃ©gie en tests unitaires).</p><h2 id="decorator-ajouter-des-fonctionnalitÃ©s-Ã -la-volÃ©e-comme-une-cache-sur-vos-services"><span class="mr-2">DecoratorÂ : Ajouter des fonctionnalitÃ©s Ã  la volÃ©e (comme une cache sur vos services)</span><a href="#decorator-ajouter-des-fonctionnalitÃ©s-Ã -la-volÃ©e-comme-une-cache-sur-vos-services" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>Le pattern Decorator ajoute dynamiquement des comportements Ã  un objet en lâ€™enveloppant dans un â€œdÃ©corateurâ€ qui implÃ©mente la mÃªme interface.</em></p><p>Le pattern <strong>Decorator</strong> (ou <strong>Wrapper</strong>) est un patron structurel qui permet dâ€™<strong>ajouter dynamiquement des responsabilitÃ©s</strong> Ã  un objet, sans modifier son code source. Imaginez un cadeau quâ€™on emballe et re-emballeÂ : le contenu reste le mÃªme, mais chaque couche de papier ajoute une fonctionnalitÃ© (un message, un ruban, etc.). En informatique, un dÃ©corateur est un objet qui <em>implÃ©mente la mÃªme interface</em> que lâ€™objet quâ€™il dÃ©core, et qui contient une rÃ©fÃ©rence vers lui-mÃªme. Il peut ainsi intercepter les appels, faire quelque chose en plus, puis dÃ©lÃ©guer Ã  lâ€™objet rÃ©el.</p><h3 id="exemple-concret-3"><span class="mr-2">Exemple concret</span><a href="#exemple-concret-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>ConsidÃ©rons un microservice dâ€™inventaire qui expose un service <code class="language-plaintext highlighter-rouge">IProduitService</code> avec une mÃ©thode <code class="language-plaintext highlighter-rouge">ObtenirProduit(int id)</code> retournant les dÃ©tails dâ€™un produit. Les appels Ã  ce service peuvent Ãªtre coÃ»teux (imaginons quâ€™il interroge une base de donnÃ©es distante). On souhaite <strong>mettre en cache</strong> les rÃ©sultats pour amÃ©liorer les performances. Sans changer le code du service existant, on peut crÃ©er un dÃ©corateur de cache.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">interface</span> <span class="nc">IProduitService</span>
<span class="p">{</span>
    <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Produit</span><span class="p">&gt;</span> <span class="nf">ObtenirProduit</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// ImplÃ©mentation principale (accÃ¨s base de donnÃ©es par exemple)</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ProduitService</span> <span class="p">:</span> <span class="n">IProduitService</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">async</span> <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Produit</span><span class="p">&gt;</span> <span class="nf">ObtenirProduit</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"AccÃ¨s BDD pour le produit </span><span class="p">{</span><span class="n">id</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Delay</span><span class="p">(</span><span class="m">50</span><span class="p">);</span> <span class="c1">// Simule un accÃ¨s I/O</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Produit</span> <span class="p">{</span> <span class="n">Id</span> <span class="p">=</span> <span class="n">id</span><span class="p">,</span> <span class="n">Nom</span> <span class="p">=</span> <span class="s">$"Produit </span><span class="p">{</span><span class="n">id</span><span class="p">}</span><span class="s">"</span> <span class="p">};</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Decorator de cache</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ProduitServiceCacheDecorator</span> <span class="p">:</span> <span class="n">IProduitService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IProduitService</span> <span class="n">_produitService</span><span class="p">;</span>
    <span class="c1">// Devrait provenir de l'IoC</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">MemoryCache</span> <span class="n">_cache</span> <span class="p">=</span> <span class="k">new</span><span class="p">(</span><span class="k">new</span> <span class="nf">MemoryCacheOptions</span><span class="p">());</span>

    <span class="k">public</span> <span class="nf">ProduitServiceCacheDecorator</span><span class="p">(</span><span class="n">IProduitService</span> <span class="n">produitService</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_produitService</span> <span class="p">=</span> <span class="n">produitService</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Produit</span><span class="p">&gt;</span> <span class="nf">ObtenirProduit</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_cache</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="k">out</span> <span class="n">Produit</span> <span class="n">produit</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Cache hit pour le produit </span><span class="p">{</span><span class="n">id</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
            <span class="k">return</span> <span class="k">new</span> <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Produit</span><span class="p">&gt;(</span><span class="n">produit</span><span class="p">);</span> <span class="c1">// disponible de maniÃ¨re synchrone</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nf">ObtenirEtCacher</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">async</span> <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Produit</span><span class="p">&gt;</span> <span class="nf">ObtenirEtCacher</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">resultat</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_produitService</span><span class="p">.</span><span class="nf">GetProduit</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
        <span class="n">_cache</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">resultat</span><span class="p">,</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromMinutes</span><span class="p">(</span><span class="m">5</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">resultat</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><blockquote><p>ğŸ’¡ <strong>Pourquoi <code class="language-plaintext highlighter-rouge">ValueTask</code> ici ?</strong> Parce que dans le cas oÃ¹ la cache rÃ©pond, il est inutile de crÃ©er une <code class="language-plaintext highlighter-rouge">Task</code>, <code class="language-plaintext highlighter-rouge">ValueTask</code> permet de <strong>rÃ©duire la pression sur le GC</strong> pour les cas de rÃ©ponse rapide. Mais attention : si le service sous-jacent est trÃ¨s souvent asynchrone, <code class="language-plaintext highlighter-rouge">Task&lt;T&gt;</code> reste le bon choix !</p></blockquote><p>Ici, <code class="language-plaintext highlighter-rouge">ProduitServiceCacheDecorator</code> <strong>dÃ©core</strong> un <code class="language-plaintext highlighter-rouge">IProduitService</code> concret (_produitService). Il ajoute la fonctionnalitÃ© de caching autour de lâ€™appel rÃ©el. Pour le consommateur, câ€™est transparentÂ : il utilise un <code class="language-plaintext highlighter-rouge">IProduitService</code> sans savoir si câ€™est le cache ou le service de base. On peut composer plusieurs dÃ©corateurs les uns avec les autres si besoin (log, sÃ©curitÃ©, etc.), chaque dÃ©corateur enveloppant le prÃ©cÃ©dent.</p><p><strong>Quand lâ€™utiliser ğŸŸ¢ :</strong> Quand vous voulez <strong>enrichir</strong> ou <strong>modifier dynamiquement</strong> le comportement dâ€™un objet <em>sans</em> altÃ©rer son code. Câ€™est idÃ©al pour les <strong>fonctionnalitÃ©s transversales</strong> (caching, logging, contrÃ´le dâ€™accÃ¨s, mesure de performanceâ€¦). Le Decorator est plus souple que lâ€™hÃ©ritage car on peut empiler plusieurs dÃ©corateurs et en activer/dÃ©sactiver certains Ã  la configuration.</p><p><strong>Ã€ Ã©viter ğŸ”´ :</strong> Si la hiÃ©rarchie de dÃ©corateurs devient trop complexe ou que vous en avez un trÃ¨s grand nombre, Ã§a peut devenir difficile Ã  suivre en debug (effet <em>oignon</em>, on se perd dans les couches). Si lâ€™objet de base a dÃ©jÃ  une bonne extension via des mÃ©canismes plus simples, inutile de rajouter en plus des dÃ©corateurs. Enfin, nâ€™utilisez pas un dÃ©corateur juste pour factoriser du code commun entre deux classesÂ : dans ce cas, une abstraction ou un <a href="https://en.wikipedia.org/wiki/Mixin">mixin</a> serait plus appropriÃ©.</p><p><strong>IntÃ©gration .NET ğŸ‘©â€ğŸ’» :</strong> .NET Core facilite la vie avec lâ€™IoC container pour chaÃ®ner les dÃ©corateurs sans douleur, grÃ¢ce Ã  des librairies comme <strong>Scrutor</strong>. Scrutor fournit une mÃ©thode dâ€™extension <code class="language-plaintext highlighter-rouge">Decorate&lt;,&gt;()</code> qui enregistre un dÃ©corateur pour un service existant. Par exemple, pour notre cas ci-dessusÂ :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">services</span><span class="p">.</span><span class="n">AddScoped</span><span class="p">&lt;</span><span class="n">IProduitService</span><span class="p">,</span> <span class="n">ProduitService</span><span class="p">&gt;();</span>
<span class="n">services</span><span class="p">.</span><span class="n">Decorate</span><span class="p">&lt;</span><span class="n">IProduitService</span><span class="p">,</span> <span class="n">ProduitServiceCacheDecorator</span><span class="p">&gt;();</span>
</pre></table></code></div></div><p>Comme le dÃ©crit Andrew Lock, <em>â€œScrutor cherche tout service enregistrÃ© en <code class="language-plaintext highlighter-rouge">IProduitService</code> (ici <code class="language-plaintext highlighter-rouge">ProduitService</code>) et le remplace par <code class="language-plaintext highlighter-rouge">ProduitServiceCacheDecorator</code> qui prendra en paramÃ¨tre de constructeur lâ€™ancien serviceâ€</em>. En un appel, on a intercalÃ© le cache entre lâ€™application et le service rÃ©el. Scrutor gÃ¨re lâ€™ordre (il faut ajouter le dÃ©corateur <strong>aprÃ¨s</strong> le service de base) et la rÃ©solution des dÃ©pendances supplÃ©mentaires du dÃ©corateur.</p><p>Sans Scrutor, on peut toujours enregistrer manuellement un dÃ©corateurÂ : par exemple, on enregistre <code class="language-plaintext highlighter-rouge">ProduitService</code> puis on enregistre <code class="language-plaintext highlighter-rouge">IProduitService</code> pointant vers un <code class="language-plaintext highlighter-rouge">provider =&gt; new ProduitServiceCacheDecorator(new ProduitService(...))</code>. Mais avouons que Scrutor fait Ã§a proprement, de faÃ§on dÃ©clarative.</p><h2 id="middleware-le-pipeline-http-dans-aspnet-core"><span class="mr-2">MiddlewareÂ : le pipeline HTTP dans ASP.NET Core</span><a href="#middleware-le-pipeline-http-dans-aspnet-core" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>Pipeline de middlewares ASP.NET CoreÂ : chaque middleware (1, 2, 3) traite la requÃªte puis appelle le suivant, formant une chaÃ®ne autour de la requÃªte/rÃ©ponse.</em></p><p>Le terme <strong>Middleware</strong> dÃ©signe un composant logiciel intermÃ©diaire qui sâ€™insÃ¨re dans une chaÃ®ne de traitement. En ASP.NET Core, <em>le pipeline de requÃªte HTTP est une illustration concrÃ¨te du pattern Chain of Responsibility</em> appliquÃ© aux requÃªtes et rÃ©ponses HTTP. Chaque middleware a la possibilitÃ© dâ€™agir sur la requÃªte entrante, de dÃ©cider de la court-circuiter (renvoyer directement une rÃ©ponse) ou de faire quelque chose avant/aprÃ¨s de passer la main au middleware suivant.</p><p>En fait, un middleware ASP.NET Core est une implÃ©mentation spÃ©cialisÃ©e du pattern Decorator/Chain, dÃ©diÃ©e aux requÃªtes HTTP. Vous en utilisez Ã  chaque fois que vous faites <code class="language-plaintext highlighter-rouge">app.UseXyz(...)</code> dans le <code class="language-plaintext highlighter-rouge">Program.cs</code> : authentification, logging, routing, etc., sont des middlewares standards.</p><h3 id="exemple-concret-4"><span class="mr-2">Exemple concret</span><a href="#exemple-concret-4" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Supposons que lâ€™on veuille journaliser le temps de traitement de certaines requÃªtes pour une API de gestion dâ€™inventaire. On peut Ã©crire un middleware custom <code class="language-plaintext highlighter-rouge">LoggingMiddleware</code> qui, pour chaque requÃªte, enregistre lâ€™heure de dÃ©but, appelle le composant suivant, puis enregistre lâ€™heure de fin et calcule la durÃ©e.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">LoggingMiddleware</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">RequestDelegate</span> <span class="n">_next</span><span class="p">;</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">TimeProvider</span> <span class="n">_timeProvider</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">LoggingMiddleware</span><span class="p">(</span><span class="n">RequestDelegate</span> <span class="n">next</span><span class="p">,</span>
       <span class="n">TimeProvider</span> <span class="n">timeProvider</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_next</span> <span class="p">=</span> <span class="n">next</span><span class="p">;</span>
        <span class="n">_timeProvider</span> <span class="p">=</span> <span class="n">timeProvider</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Invoke</span><span class="p">(</span><span class="n">HttpContext</span> <span class="n">context</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">debut</span> <span class="p">=</span> <span class="n">_timeProvider</span><span class="p">.</span><span class="nf">GetUtcNow</span><span class="p">();</span>
        <span class="k">await</span> <span class="nf">_next</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>

        <span class="kt">var</span> <span class="n">duration</span> <span class="p">=</span> <span class="n">_timeProvider</span><span class="p">.</span><span class="nf">GetUtcNow</span><span class="p">()</span> <span class="p">-</span> <span class="n">debut</span><span class="p">;</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"RequÃªte </span><span class="p">{</span><span class="n">context</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">Path</span><span class="p">}</span><span class="s"> traitÃ©e en </span><span class="p">{</span><span class="n">duration</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">}</span><span class="s"> ms"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Dans le <code class="language-plaintext highlighter-rouge">Program.cs</code>, on lâ€™enregistre dans le pipelineÂ :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kt">var</span> <span class="n">app</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">();</span>
<span class="n">app</span><span class="p">.</span><span class="n">UseMiddleware</span><span class="p">&lt;</span><span class="n">LoggingMiddleware</span><span class="p">&gt;();</span>
</pre></table></code></div></div><p>Chaque requÃªte HTTP va passer par ce middleware, puis continuer. On pourrait chaÃ®ner dâ€™autres middlewares avant/aprÃ¨s. Par exemple, on pourrait ajouter un middleware de cache en amont qui vÃ©rifie si la rÃ©ponse nâ€™est pas dÃ©jÃ  en cache (et ne pas appeler <code class="language-plaintext highlighter-rouge">_next</code> du tout sâ€™il trouve quelque chose), ou un middleware dâ€™authentification qui vÃ©rifie le token JWT puis appelle <code class="language-plaintext highlighter-rouge">_next</code> si OK, ou renvoie 401 immÃ©diatement si non autorisÃ©.</p><p><strong>Quand lâ€™utiliser ğŸŸ¢ :</strong> Les middlewares sont <em>incontournables</em> en dÃ©veloppement ASP.NET Core pour tout ce qui est <strong>cross-cutting</strong> au niveau des requÃªtes HTTP. Câ€™est littÃ©ralement la faÃ§on de faire officielle pour filtrer/travailler sur les requÃªtes et rÃ©ponses. Dans un contexte plus large, on peut assimiler nâ€™importe quelle suite de traitements sÃ©quentiels modulaires Ã  ce concept de middleware. Donc utilisez ce pattern/pipeline dÃ¨s que vous avez un traitement en plusieurs Ã©tapes oÃ¹ chaque Ã©tape peut dÃ©cider de stopper ou de modifier le flux.</p><p><strong>Ã€ Ã©viter ğŸ”´ :</strong> En dehors du contexte web, Ã©vitez dâ€™abuser des pipelines si un simple appel direct suffit. Inutile de sur-architecturer une simple sÃ©quence dâ€™appels en pipeline ultra-gÃ©nÃ©rique si elle ne sera jamais modifiÃ©e. Pour ASP.NET, faites attention Ã  lâ€™ordre des middlewaresÂ : une mauvaise ordre (par exemple placer lâ€™authentification aprÃ¨s le routing alors quâ€™on en a besoin avant) peut causer des bugs subtils. Ce nâ€™est pas tant le pattern en lui-mÃªme quâ€™il faut Ã©viter, mais plutÃ´t sa mauvaise configuration.</p><p><strong>IntÃ©gration .NET ğŸ‘©â€ğŸ’» :</strong> Pour ASP.NET Core, lâ€™intÃ©gration est native (mÃ©thodes <code class="language-plaintext highlighter-rouge">UseMiddleware&lt;T&gt;()</code>, etc.). Vous pouvez profiter de lâ€™injection de dÃ©pendances <em>dans</em> vos middlewares en dÃ©finissant un constructeur qui prend les services voulus (le framework les injectera). Ainsi votre middleware peut trÃ¨s bien Ãªtre un dÃ©corateur qui utilise un service de cache ou un repo injectÃ© du container. Enfin, notez que dâ€™autres librairies adoptent ce pattern de pipeline configurableÂ : citons <strong>MediatR</strong> (avec ses Pipeline Behaviors qui agissent autour des requÃªtes MediatR), ou <strong>Message delegating handlers</strong> pour HttpClient. Comprendre le fonctionnement des middlewares vous aidera donc dans de nombreux recoins du framework .NET.</p><h2 id="mediator-un-hub-pour-la-communication-grÃ¢ce-Ã -mediatr"><span class="mr-2">MediatorÂ : un <strong>hub</strong> pour la communication, grÃ¢ce Ã  MediatR</span><a href="#mediator-un-hub-pour-la-communication-grÃ¢ce-Ã -mediatr" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Le pattern <strong>Mediator</strong> dÃ©finit un objet intermÃ©diaire qui <strong>centralise les communications</strong> entre plusieurs composants au lieu quâ€™ils interagissent directement. Imaginez une tour de contrÃ´le dâ€™aÃ©roport : les avions (composants) ne se parlent pas entre eux en direct, ils parlent tous Ã  la tour (mÃ©diateur) qui coordonne tout. Cela rÃ©duit le couplage : chaque objet a juste Ã  connaÃ®tre le mÃ©diateur, pas les dÃ©tails des autres.</p><p>En .NET, on utilise frÃ©quemment une librairie nommÃ©e <strong>MediatR</strong> (de Jimmy Bogard) pour implÃ©menter ce pattern. MediatR permet dâ€™envoyer des <strong>requÃªtes/commandes</strong> et de les faire traiter par un ou plusieurs <strong>handlers</strong> enregistrÃ©s, sans que lâ€™Ã©metteur et le rÃ©cepteur se connaissent.</p><h3 id="exemple-concret-5"><span class="mr-2">Exemple concret</span><a href="#exemple-concret-5" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Dans une application de gestion dâ€™inventaire, imaginons quâ€™on veuille dÃ©coller la logique mÃ©tier des contrÃ´leurs API. On peut dÃ©finir une commande du domaine, par exemple <code class="language-plaintext highlighter-rouge">AjouterProduitCommand</code> (avec les infos du produit), et un handler associÃ© <code class="language-plaintext highlighter-rouge">AjouterProduitHandler</code> qui contient la logique pour ajouter le produit (vÃ©rifier stock, enregistrer en base de donnÃ©es, etc.). Le contrÃ´leur va juste <em>envoyer</em> la commande via le mÃ©diateur, qui lui se charge de trouver et exÃ©cuter le handler adÃ©quat.</p><p>Avec MediatR, cela se traduit parÂ :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="c1">// DÃ©finition d'une commande (implÃ©mente IRequest&lt;T&gt; de MediatR)</span>
<span class="k">public</span> <span class="k">record</span> <span class="nc">AjouterProduitCommand</span><span class="p">(</span><span class="kt">string</span> <span class="n">Reference</span><span class="p">,</span> <span class="kt">int</span> <span class="n">Quantite</span><span class="p">)</span> <span class="p">:</span> <span class="n">IRequest</span><span class="p">&lt;</span><span class="n">ResultatProduit</span><span class="p">&gt;;</span>

<span class="c1">// ImplÃ©mentation du handler pour cette commande</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">AjouterProduitHandler</span> <span class="p">:</span> <span class="n">IRequestHandler</span><span class="p">&lt;</span><span class="n">AjouterProduitCommand</span><span class="p">,</span> <span class="n">ResultatProduit</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IProduitRepository</span> <span class="n">_produitRepository</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">AjouterProduitHandler</span><span class="p">(</span><span class="n">IProduitRepository</span> <span class="n">produitRepository</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_produitRepository</span> <span class="p">=</span> <span class="n">produitRepository</span><span class="p">;</span>
    <span class="p">}</span> 

    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">ResultatProduit</span><span class="p">&gt;</span> <span class="nf">Handle</span><span class="p">(</span><span class="n">AjouterProduitCommand</span> <span class="n">command</span><span class="p">,</span>
       <span class="n">CancellationToken</span> <span class="n">cancellationToken</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Produit</span> <span class="n">prod</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Produit</span>
        <span class="p">{</span> 
            <span class="n">Reference</span> <span class="p">=</span> <span class="n">command</span><span class="p">.</span><span class="n">Reference</span><span class="p">,</span>
            <span class="n">Quantite</span> <span class="p">=</span> <span class="n">command</span><span class="p">.</span><span class="n">Quantite</span>
        <span class="p">};</span>

        <span class="k">await</span> <span class="n">_produitRepository</span><span class="p">.</span><span class="nf">Ajouter</span><span class="p">(</span><span class="n">prod</span><span class="p">,</span> <span class="n">cancellationToken</span><span class="p">);</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nf">ResultatProduit</span><span class="p">(</span><span class="n">prod</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="s">"Produit ajoutÃ© avec succÃ¨s"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Dans le contrÃ´leur (ou nâ€™importe quel endroit du code) qui a besoin dâ€™ajouter un produit, on feraitÂ :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c1">// _mediator est injectÃ© via IMediator de MediatR</span>
<span class="kt">var</span> <span class="n">resultat</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_mediator</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="k">new</span> <span class="nf">AjouterProduitCommand</span><span class="p">(</span><span class="s">"REF123"</span><span class="p">,</span> <span class="m">50</span><span class="p">));</span>
<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">resultat</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
</pre></table></code></div></div><p>Ici, <code class="language-plaintext highlighter-rouge">_mediator.Send(...)</code> va en coulisses trouver le <code class="language-plaintext highlighter-rouge">AjouterProduitHandler</code> (grÃ¢ce au container IoC et MediatR), exÃ©cuter sa mÃ©thode <code class="language-plaintext highlighter-rouge">Handle</code>, et renvoyer le rÃ©sultat. Le contrÃ´leur nâ€™a aucune rÃ©fÃ©rence directe sur le handler ou le repository, il passe par le mÃ©diateur.</p><p><strong>Quand lâ€™utiliser ğŸŸ¢ :</strong> Lorsque vous voulez <strong>dÃ©coupler</strong> fortement les composants qui interagissent. Le Mediator est roi dans les architectures <strong>CQRS</strong> / <strong>MÃ©diation</strong> : il permet dâ€™envoyer des <em>Commandes</em> et <em>Query</em> sans lier le code dâ€™envoi et le code de traitement. Utile aussi pour implÃ©menter un systÃ¨me de <strong>notifications/Ã©vÃ©nements internes</strong> : par exemple, plusieurs parties de lâ€™application Ã©coutent un Ã©vÃ©nement via Mediator (avec MediatR ce sont les <code class="language-plaintext highlighter-rouge">INotification</code> et leurs handlers multiples). En somme, dÃ¨s que votre application commence Ã  ressembler Ã  un enchevÃªtrement de signaux entre modules, introduire un mÃ©diateur peut apporter de la lisibilitÃ© et une architecture en Ã©toile plutÃ´t quâ€™en plat de nouilles.</p><p><strong>Ã€ Ã©viter ğŸ”´ :</strong> Si le trafic via le mÃ©diateur devient trop centralisÃ©, le Mediator peut lui-mÃªme devenir un goulot dâ€™Ã©tranglement ou un <em>god object</em> dÃ©guisÃ© (ex: un seul mediator gigantesque qui sait trop de choses). Il faut lâ€™utiliser pour ce quâ€™il fait bien : la <strong>dÃ©couplage de lâ€™envoi et du traitement</strong>. Si deux composants sont naturellement faits pour interagir directement (faible couplage, usage local), inutile de forcer le passage par un mÃ©diateur. Par ailleurs, un excÃ¨s de mÃ©diation peut compliquer le suivi du flux dâ€™appel (on perd un peu la trace de â€œqui appelle quiâ€ car tout passe par le hub central). Comme toujours, câ€™est un Ã©quilibre.</p><p><strong>IntÃ©gration .NET ğŸ‘©â€ğŸ’» :</strong> Lâ€™intÃ©gration de MediatR en .NET Core est trÃ¨s simpleÂ : on installe le package, puis dans <code class="language-plaintext highlighter-rouge">Program.cs</code> on fait <code class="language-plaintext highlighter-rouge">services.AddMediatR(cfg =&gt; cfg.RegisterServicesFromAssemblyContaining&lt;Program&gt;());</code> (ou Ã©quivalent) pour enregistrer tous les handlers du projet. MediatR utilise le container IoC pour rÃ©soudre les handlers. On peut configurer des comportements additionnels (les fameux Pipeline Behaviors mentionnÃ©s plus haut, qui permettent dâ€™implÃ©menter des cross-cutting concerns autour des requÃªtes Mediator, comme la validation, le logging, etc. â€“ câ€™est en fait un Chain of Responsibility autour du Mediator!).</p><p>Avec MediatR, on peut envoyer des commandes synchrones ou asynchrones, des requÃªtes qui attendent une rÃ©ponse, ou des notifications sans rÃ©ponse (pub/sub interne). Câ€™est un outil formidable pour structurer du code mÃ©tier dans les applications de gestion, en appliquant les principes <strong>CQRS</strong> (sÃ©parer Ã©criture/lecture) et <strong>Clean Architecture</strong>. Ã€ noter : plusieurs implÃ©mentations du pattern Mediator existent dans lâ€™Ã©cosystÃ¨me .NET. Il est possible dâ€™en coder une version minimaliste maison, ou dâ€™utiliser des bibliothÃ¨ques comme <code class="language-plaintext highlighter-rouge">MediatR</code>, qui a longtemps Ã©tÃ© une rÃ©fÃ©rence. <strong>Toutefois, attention : MediatR qui sera prochainement sous <a href="https://www.jimmybogard.com/automapper-and-mediatr-going-commercial/">licence commerciale</a></strong>, ce qui <strong>limite son usage dans les projets professionnels</strong>.</p><h2 id="builder-construction-pas-Ã -pas-et-syntaxe-fluide"><span class="mr-2">BuilderÂ : construction pas-Ã -pas et syntaxe fluide</span><a href="#builder-construction-pas-Ã -pas-et-syntaxe-fluide" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>Le Builder pattern sÃ©pare la construction dâ€™un objet complexe de sa reprÃ©sentation. Ici, le <code class="language-plaintext highlighter-rouge">Director</code> utilise un <code class="language-plaintext highlighter-rouge">Builder</code> (fluent) pour assembler un <code class="language-plaintext highlighter-rouge">Product</code> Ã©tape par Ã©tape.</em></p><p>Dernier pattern mais non des moindresÂ : <strong>Builder</strong>. Si je vous dis <em>Â«Â constructeur avec 12 paramÃ¨tresÂ Â»</em>, vous me dites ğŸ¤®. En effet, quand un objet possÃ¨de beaucoup de propriÃ©tÃ©s optionnelles, le passage de paramÃ¨tres devient illisible et sujet Ã  erreur. Le Builder vient Ã  la rescousse en fournissant une <strong>interface de construction progressive (souvent fluide)</strong>. On crÃ©e lâ€™objet en plusieurs Ã©tapes, via des mÃ©thodes dÃ©diÃ©es, plutÃ´t quâ€™un seul gros constructeur. Câ€™est un peu le mode dâ€™emploi IkeaÂ : on assemble piÃ¨ce par piÃ¨ce, et Ã  la fin on obtient le meuble.</p><h3 id="exemple-concret-6"><span class="mr-2">Exemple concret</span><a href="#exemple-concret-6" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Dans une application de gestion, imaginons un module de gÃ©nÃ©ration de <strong>rapport PDF</strong> complexe (par exemple un rapport dâ€™activitÃ© mensuel avec plusieurs sections, en-tÃªte, pied de page, etc.). PlutÃ´t que dâ€™avoir une mÃ©thode gÃ©ante qui prend 20 arguments pour tout configurer, on va utiliser un <code class="language-plaintext highlighter-rouge">ReportBuilder</code> qui va fournir des mÃ©thodes pour ajouter les diffÃ©rentes parties du rapport de maniÃ¨re lisible.</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">Report</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Titre</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Sections</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="p">[];</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">PiedDePage</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">// ... Ã©ventuellement d'autres propriÃ©tÃ©s complexes (graphique, tableau, etc.)</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">ReportBuilder</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">Report</span> <span class="n">_report</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Report</span><span class="p">();</span>

    <span class="k">public</span> <span class="n">ReportBuilder</span> <span class="nf">Titre</span><span class="p">(</span><span class="kt">string</span> <span class="n">titre</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_report</span><span class="p">.</span><span class="n">Titre</span> <span class="p">=</span> <span class="n">titre</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span> <span class="c1">// on retourne le builder pour chaÃ®ner</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">ReportBuilder</span> <span class="nf">AjouterSection</span><span class="p">(</span><span class="kt">string</span> <span class="n">contenuSection</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_report</span><span class="p">.</span><span class="n">Sections</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">contenuSection</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">ReportBuilder</span> <span class="nf">PiedDePage</span><span class="p">(</span><span class="kt">string</span> <span class="n">textePied</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_report</span><span class="p">.</span><span class="n">PiedDePage</span> <span class="p">=</span> <span class="n">textePied</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">Report</span> <span class="nf">Build</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_report</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Utilisation en syntaxe fluide (fluent interface)Â :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="CopiÃ©!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">Report</span> <span class="n">rapport</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ReportBuilder</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">Titre</span><span class="p">(</span><span class="s">"Rapport dâ€™activitÃ© - Mars 2025"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">AjouterSection</span><span class="p">(</span><span class="s">"Chiffre d'affaires : 1M â‚¬"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">AjouterSection</span><span class="p">(</span><span class="s">"Nouveaux clients : 50"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">PiedDePage</span><span class="p">(</span><span class="s">"Confidentiel - interne"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">Build</span><span class="p">();</span>
</pre></table></code></div></div><p>On lit quasiment du franÃ§ais dans le code ! On a progressivement construit lâ€™objet <code class="language-plaintext highlighter-rouge">rapport</code> sans se soucier de lâ€™ordre interne des initialisations ni dâ€™oublier un paramÃ¨tre requis. Le Builder encapsule la logique dâ€™assemblage (ici triviale, mais elle pourrait Ãªtre plus complexe avec par exemple calcul de totaux en interne avant <code class="language-plaintext highlighter-rouge">Build</code>).</p><p><strong>Quand lâ€™utiliser ğŸŸ¢ :</strong> Quand la crÃ©ation dâ€™un objet est <strong>complexe</strong>, câ€™est-Ã -dire :</p><ul><li>comporte de <strong>nombreux paramÃ¨tres</strong> (optionnels ou obligatoires) rendant un constructeur classique impraticable ou ambigu,<li>nÃ©cessite des <strong>Ã©tapes</strong> multiples (par exemple certaines parties doivent Ãªtre construites avant dâ€™autres),<li>ou quand on veut offrir Ã  lâ€™API utilisateur une <strong>syntaxe fluide</strong> trÃ¨s lisible pour configurer un objet.</ul><p>Les cas dâ€™utilisation concrets abondent en applications de gestionÂ : construction dâ€™un rapport comme vu, configuration dynamique dâ€™un objet de paramÃ©trage, montage dâ€™une requÃªte SQL/ElasticSearch complexe via un QueryBuilder, etc. Le Builder pattern permet aussi dâ€™isoler la logique de crÃ©ation en un point unique (respect du single responsibility).</p><p><strong>Ã€ Ã©viter ğŸ”´ :</strong> Si lâ€™objet Ã  crÃ©er est simple (quelques paramÃ¨tres), un constructeur ou les <strong>object initializers</strong> de C# (init { Prop1 = â€¦, Prop2 = â€¦ }) suffisent amplement. Le Builder, sâ€™il est mal conÃ§u, peut Ã©galement laisser lâ€™objet dans un Ã©tat partiel incohÃ©rent tant que <code class="language-plaintext highlighter-rouge">Build()</code> nâ€™a pas Ã©tÃ© appelÃ© â€“ attention donc Ã  garantir une utilisation correcte (parfois on marque le constructeur de lâ€™objet cible internal pour forcer le passage par le builder). Ã‰vitez aussi le builder juste pour faire du <em>fluent</em> sur des opÃ©rations statiques ou non liÃ©es Ã  un objet complexe â€” lÃ  câ€™est le nom qui peut prÃªter Ã  confusion : <em>Builder</em> sert vraiment Ã  construire un objet.</p><p><strong>IntÃ©gration .NET ğŸ‘©â€ğŸ’» :</strong> La <em>syntaxe fluide</em> (fluent syntax) est trÃ¨s rÃ©pandue dans lâ€™Ã©cosystÃ¨me .NET moderne, souvent inspirÃ©e du Builder pattern. Par exemple, les <em>Options</em> de configuration se construisent via des <code class="language-plaintext highlighter-rouge">optionsBuilder.AddX()</code> en chaÃ®ne, les requÃªtes LINQ en chaÃ®ne, lâ€™API Fluent Validation (<code class="language-plaintext highlighter-rouge">RuleFor(x =&gt; x.Name).NotEmpty().WithMessage("...")</code>), etc. Sans Ãªtre toujours de purs â€œBuildersâ€, ces syntaxes fluides amÃ©liorent la lisibilitÃ© et lâ€™enchaÃ®nement dâ€™appels.</p><p>En interne, .NET utilise aussi le Builder pattern pour la construction de gros objets comme lâ€™<strong><code class="language-plaintext highlighter-rouge">HostBuilder</code> / <code class="language-plaintext highlighter-rouge">WebApplicationBuilder</code></strong> (qui configureront Ã©tape par Ã©tape votre application).</p><p>CÃ´tÃ© IoC, un Builder est souvent crÃ©Ã© via une factory ou fourni par un framework. On ne lâ€™enregistre gÃ©nÃ©ralement pas dans le container (on crÃ©e le builder quand on en a besoin, puis on jette). Toutefois, rien nâ€™empÃªche dâ€™injecter un builder prÃ©-configurÃ© si cela a du sens dans votre design.</p><p>En rÃ©sumÃ©, le Builder est un peu lâ€™inverse du FactoryÂ : on lâ€™utilise pour composer <strong>petit Ã  petit</strong> un objet complexe, lÃ  oÃ¹ la Factory crÃ©e dâ€™emblÃ©e un objet souvent simple ou retourne une implÃ©mentation. Avec le Builder pattern, on prend le temps dâ€™assembler et grÃ¢ce au <em>fluent interface</em>, le code appelant est clair et expressif.</p><h2 id="conclusion-choisir-le-bon-pattern-au-bon-moment"><span class="mr-2">ConclusionÂ : Choisir le bon pattern au bon moment</span><a href="#conclusion-choisir-le-bon-pattern-au-bon-moment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Nous avons fait un tour dâ€™horizon de plusieurs design patterns clÃ©s en .NET Core. Chaque pattern est un <strong>outil</strong> dans votre boÃ®te Ã  outilsÂ : il a un usage privilÃ©giÃ©, des avantages, des inconvÃ©nients. Lâ€™art de lâ€™architecture logicielle consiste Ã  choisir <em>le bon Lego au bon moment</em>. Il nâ€™y a pas de solution universelleÂ : parfois un simple <code class="language-plaintext highlighter-rouge">if</code> vaut mieux quâ€™un Strategy surdimensionnÃ©, parfois un Mediator apporte une structure bienvenue lÃ  oÃ¹ le couplage devenait ingÃ©rable.</p><p>Un conseil : <strong>entraÃ®nez-vous</strong> Ã  reconnaÃ®tre dans votre code ou dans les frameworks que vous utilisez quels patterns sont Ã  lâ€™Å“uvre. Vous verrez que ASP.NET Core, Entity Framework, etc., sont truffÃ©s de ces concepts (Singletons pour les services, Factory methods pour les DbContext, Decorators dans les pipeline, etc.). Comprendre les design patterns vous permettra non seulement de mieux utiliser les API .NET, mais aussi de concevoir vos propres composants de maniÃ¨re Ã©lÃ©gante et maintenable.</p><p>Enfin, pour aller plus loin, je le redis, la <a href="https://www.youtube.com/watch?v=v9ejT8FO-7I&amp;list=PLrhzvIcii6GNjpARdnO4ueTUAVR9eMBpc">sÃ©rie</a> de <strong>Christopher Okhravi</strong> sur YouTube est un excellent complÃ©ment visuel et pÃ©dagogique, avec une touche dâ€™humour qui, je lâ€™espÃ¨re, aura fait Ã©cho Ã  la lecture de cet article. ğŸ˜‰</p><p>En maÃ®trisant ces patterns, vous Ã©viterez de rÃ©inventer la roue carrÃ©e et vous construirez des applications Ã©volutives <em>brique par brique</em>. Alors Ã  vos Legos, prÃªts, codezÂ ! ğŸš€</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/architecture/'>architecture</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Cet article est sous licence <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> par l'auteur.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Partager</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Les%20design%20patterns%C2%A0-%20les%20bons%20Legos%20pour%20vos%20applications%20.NET%20-%20CodeWithFrenchy&url=https%3A%2F%2Fcodewithfrenchy.github.io%2F%2Fposts%2Futilisation-design-patterns%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fcodewithfrenchy.github.io%2F%2Fposts%2Futilisation-design-patterns%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Les%20design%20patterns%C2%A0-%20les%20bons%20Legos%20pour%20vos%20applications%20.NET%20-%20CodeWithFrenchy&u=https%3A%2F%2Fcodewithfrenchy.github.io%2F%2Fposts%2Futilisation-design-patterns%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copier le lien" data-title-succeed="Lien copiÃ© avec succÃ¨s!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">RÃ©cemment mis Ã  jour</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/plan-formation-dotnet/">Plan de formation - .NET Framework vers .NET moderne</a><li><a href="/posts/essais-architecture-automatises-dotnet/">Essais automatisÃ©s dâ€™architecture dans un projet .NET</a><li><a href="/posts/performances-jsonserializeroptions-singleton/">AmÃ©lioration des performances en utilisant JsonSerializerOptions en singleton</a><li><a href="/posts/source-generator-dotnet/">Les GÃ©nÃ©rateurs de source</a><li><a href="/posts/guid-versus-id/">GUID vs ID auto-incrÃ©mentÃ© - dilemme et solutions en environnement .NET distribuÃ©</a></ul></div><div id="access-tags"><div class="panel-heading">Tags tendance</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/essais/">essais</a> <a class="post-tag" href="/tags/conference/">conference</a> <a class="post-tag" href="/tags/source-generator/">source-generator</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet-core</a> <a class="post-tag" href="/tags/fluentassertions/">fluentassertions</a> <a class="post-tag" href="/tags/fluentvalidation/">fluentvalidation</a> <a class="post-tag" href="/tags/k6/">k6</a> <a class="post-tag" href="/tags/mapperly/">mapperly</a> <a class="post-tag" href="/tags/testcontainers/">testcontainers</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contenu</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Autres lectures</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/quand-utiliser-architecture-microservices/"><div class="card-body"> <em class="small" data-ts="1757376000" data-df="DD/MM/YYYY" > 08/09/2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Faut-il vraiment adopter une architecture microservices</h3><div class="text-muted small"><p> PrÃ©ambule â€œOn part en microservices ou on reste monolithique ?â€ Câ€™est une des questions les plus posÃ©es et les moins bien tranchÃ©es du monde logiciel. Une question qui revient Ã  chaque projet...</p></div></div></a></div><div class="card"> <a href="/posts/concevoir-maintenir-application-performante-dotnet/"><div class="card-body"> <em class="small" data-ts="1761001200" data-df="DD/MM/YYYY" > 20/10/2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Concevoir et maintenir des applications microservices performantes en .NET</h3><div class="text-muted small"><p> La performance logicielle ne doit pas Ãªtre une rÃ©flexion aprÃ¨s coup : elle se conÃ§oit dÃ¨s le dÃ©part et se cultive tout au long de la vie du systÃ¨me. Dans cet article, nous explorons comment sâ€™outil...</p></div></div></a></div><div class="card"> <a href="/posts/essais-architecture-automatises-dotnet/"><div class="card-body"> <em class="small" data-ts="1762210800" data-df="DD/MM/YYYY" > 03/11/2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Essais automatisÃ©s dâ€™architecture dans un projet .NET</h3><div class="text-muted small"><p> Introduction Dans les projets .NET complexes, par exemple appliquant le Domain-Driven Design (DDD) ou une Clean Architecture stricte, il devient crucial de sâ€™assurer que la structure du code respe...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/quand-utiliser-architecture-microservices/" class="btn btn-outline-primary" prompt="Plus ancien"><p>Faut-il vraiment adopter une architecture microservices</p></a> <a href="/posts/dotnet10/" class="btn btn-outline-primary" prompt="Plus rÃ©cent"><p>.NET 10 - NouveautÃ©s, Performances et Support ProlongÃ©</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Tags tendance</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/essais/">essais</a> <a class="post-tag" href="/tags/conference/">conference</a> <a class="post-tag" href="/tags/source-generator/">source-generator</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet-core</a> <a class="post-tag" href="/tags/fluentassertions/">fluentassertions</a> <a class="post-tag" href="/tags/fluentvalidation/">fluentvalidation</a> <a class="post-tag" href="/tags/k6/">k6</a> <a class="post-tag" href="/tags/mapperly/">mapperly</a> <a class="post-tag" href="/tags/testcontainers/">testcontainers</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> Â© 2026 <a href="https://twitter.com/alexis35115">Alexis Garon-Michaud</a>. <span data-toggle="tooltip" data-placement="top" title="Sauf mention contraire, les articles de ce site sont publiÃ©s sous licence sous la licence Creative Commons Attribution 4.0 International (CC BY 4.0) par l'auteur.">Certains droits rÃ©servÃ©s.</span></p></div><div class="footer-right"><p class="mb-0">PropulsÃ© par <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> avec le thÃ¨me <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a></p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oups! Aucun rÃ©sultat trouvÃ©.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/fr.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
