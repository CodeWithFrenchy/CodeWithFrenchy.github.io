<!DOCTYPE html><html lang="fr-FR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Interrupteurs de fonctionnalité" /><meta property="og:locale" content="fr_FR" /><meta name="description" content="Qu’est-ce qu’un interrupteur de fonctionnalité" /><meta property="og:description" content="Qu’est-ce qu’un interrupteur de fonctionnalité" /><link rel="canonical" href="https://codewithfrenchy.github.io//posts/interrupteur-fonctionnalite/" /><meta property="og:url" content="https://codewithfrenchy.github.io//posts/interrupteur-fonctionnalite/" /><meta property="og:site_name" content="CodeWithFrenchy" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-04-21T18:00:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Interrupteurs de fonctionnalité" /><meta name="twitter:site" content="@alexis35115" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-04-21T18:00:00-04:00","datePublished":"2025-04-21T18:00:00-04:00","description":"Qu’est-ce qu’un interrupteur de fonctionnalité","headline":"Interrupteurs de fonctionnalité","mainEntityOfPage":{"@type":"WebPage","@id":"https://codewithfrenchy.github.io//posts/interrupteur-fonctionnalite/"},"url":"https://codewithfrenchy.github.io//posts/interrupteur-fonctionnalite/"}</script><title>Interrupteurs de fonctionnalité | CodeWithFrenchy</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="CodeWithFrenchy"><meta name="application-name" content="CodeWithFrenchy"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/53872142?s=400&u=53187283fe05254234a3890e2b44134f96e3a833&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">CodeWithFrenchy</a></div><div class="site-subtitle font-italic">Architecte logiciel, audacieux et fermier</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>ACCUEIL</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATÉGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>À PROPOS DE</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/alexis35115" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/alexis35115" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/alexis-garon-michaud-a59643219/" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Accueil </a> </span> <span>Interrupteurs de fonctionnalité</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Recherche..."> </span> <span id="search-cancel" >Annuler</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Interrupteurs de fonctionnalité</h1><div class="post-meta text-muted"> <span> Posté <em class="" data-ts="1745272800" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 21/04/2025 </em> </span><div class="d-flex justify-content-between"> <span> Par <em> <a href="https://twitter.com/alexis35115">Alexis Garon-Michaud</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="748 mots"> <em>4 min</em> à lire</span></div></div></div><div class="post-content"><h2 id="quest-ce-quun-interrupteur-de-fonctionnalité"><span class="mr-2">Qu’est-ce qu’un interrupteur de fonctionnalité</span><a href="#quest-ce-quun-interrupteur-de-fonctionnalité" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Les applications cloud, les microservices et les pratiques DevOps misent sur la vitesse et l’agilité. Les utilisateurs attendent de la réactivité, des nouveautés fréquentes et peu (voire aucun) temps d’arrêt.</p><p>Les <strong>interrupteurs de fonctionnalité</strong> sont une technique moderne de déploiement permettant de découpler l’activation d’une fonctionnalité de son déploiement. Une simple modification de configuration suffit à activer une fonctionnalité pour certains utilisateurs ou environnements, sans redémarrer ni redéployer l’application (<em>en théorie</em>).</p><blockquote><p>⚡ Ils permettent de <strong>dissocier le déploiement de la mise en production</strong>.</p></blockquote><p>Cela permet notamment de tester des fonctionnalités en production sur des groupes restreints d’utilisateurs ou d’activer graduellement une nouveauté.</p><h2 id="mise-en-place-dans-une-application-net"><span class="mr-2">Mise en place dans une application .NET</span><a href="#mise-en-place-dans-une-application-net" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="installation-des-packages-nuget"><span class="mr-2">Installation des packages NuGet</span><a href="#installation-des-packages-nuget" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Pour tout projet :<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dotnet add package Microsoft.FeatureManagement
</pre></table></code></div></div><li>Pour les APIs :<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dotnet add package Microsoft.FeatureManagement.AspNetCore
</pre></table></code></div></div></ul><h3 id="configuration-minimale"><span class="mr-2">Configuration minimale</span><a href="#configuration-minimale" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">Microsoft.FeatureManagement</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span> 
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="nf">AddFeatureManagement</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="utilisation-du-service-ifeaturemanager"><span class="mr-2">Utilisation du service <code class="language-plaintext highlighter-rouge">IFeatureManager</code></span><a href="#utilisation-du-service-ifeaturemanager" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Une fois la configuration en place, vous pouvez interroger facilement un interrupteur de fonctionnalité comme illustré dans l’exemple suivant :</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">MonService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IFeatureManager</span> <span class="n">_featureManager</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">MonService</span><span class="p">(</span><span class="n">IFeatureManager</span> <span class="n">featureManager</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_featureManager</span> <span class="p">=</span> <span class="n">featureManager</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="nf">ObtenirMessage</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">_featureManager</span><span class="p">.</span><span class="nf">IsEnabledAsync</span><span class="p">(</span><span class="s">"NouvelleFonctionnalite"</span><span class="p">)</span>
            <span class="p">?</span> <span class="s">"Bienvenue avec la nouvelle fonctionnalité"</span>
            <span class="p">:</span> <span class="s">"Bienvenue"</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="sources-de-configuration"><span class="mr-2">Sources de configuration</span><a href="#sources-de-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="fichier-appsettingsjson"><span class="mr-2">Fichier <code class="language-plaintext highlighter-rouge">appsettings.json</code></span><a href="#fichier-appsettingsjson" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"FeatureManagement"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"NouvelleFonctionnalite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>Ou via une section personnalisée :</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"MaSectionFlags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"NouvelleFonctionnalite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">services</span><span class="p">.</span><span class="nf">AddFeatureManagement</span><span class="p">(</span><span class="n">Configuration</span><span class="p">.</span><span class="nf">GetSection</span><span class="p">(</span><span class="s">"MaSectionFlags"</span><span class="p">));</span>
</pre></table></code></div></div><h3 id="variables-denvironnement"><span class="mr-2">Variables d’environnement</span><a href="#variables-denvironnement" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">FeatureManagement__NouvelleFonctionnalite</span><span class="o">=</span><span class="nb">true</span>
</pre></table></code></div></div><blockquote><p>✅ Deux underscores requis entre la section et la clé.</p></blockquote><h3 id="azure-app-configuration"><span class="mr-2">Azure App Configuration</span><a href="#azure-app-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>NuGet :<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dotnet add package Microsoft.Extensions.Configuration.AzureAppConfiguration
</pre></table></code></div></div><li>Configuration :</ul><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">config</span><span class="p">.</span><span class="nf">AddAzureAppConfiguration</span><span class="p">(</span><span class="n">options</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">options</span><span class="p">.</span><span class="nf">Connect</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="nf">GetEnvironmentVariable</span><span class="p">(</span><span class="s">"ConnectionString"</span><span class="p">))</span>
           <span class="p">.</span><span class="nf">ConfigureRefresh</span><span class="p">(</span><span class="n">refresh</span> <span class="p">=&gt;</span>
               <span class="n">refresh</span><span class="p">.</span><span class="nf">Register</span><span class="p">(</span><span class="s">"Settings:Sentinel"</span><span class="p">,</span> <span class="n">refreshAll</span><span class="p">:</span> <span class="k">true</span><span class="p">)</span>
                      <span class="p">.</span><span class="nf">SetCacheExpiration</span><span class="p">(</span><span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromMinutes</span><span class="p">(</span><span class="m">1</span><span class="p">)))</span>
           <span class="p">.</span><span class="nf">UseFeatureFlags</span><span class="p">();</span>
<span class="p">});</span>
</pre></table></code></div></div><h2 id="cas-dutilisation"><span class="mr-2">Cas d’utilisation</span><a href="#cas-dutilisation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="activation-conditionnelle-dun-contrôleur-ou-endpoint"><span class="mr-2">Activation conditionnelle d’un contrôleur ou endpoint</span><a href="#activation-conditionnelle-dun-contrôleur-ou-endpoint" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="nf">FeatureGate</span><span class="p">(</span><span class="n">FeatureFlags</span><span class="p">.</span><span class="n">NouvelleFonctionnalite</span><span class="p">)]</span>
<span class="p">[</span><span class="n">ApiController</span><span class="p">]</span>
<span class="p">[</span><span class="nf">Route</span><span class="p">(</span><span class="s">"api/[controller]"</span><span class="p">)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ExempleController</span> <span class="p">:</span> <span class="n">ControllerBase</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">HttpGet</span><span class="p">]</span>
    <span class="p">[</span><span class="nf">FeatureGate</span><span class="p">(</span><span class="n">FeatureFlags</span><span class="p">.</span><span class="n">NouvelleFonctionnalite</span><span class="p">)]</span>
    <span class="k">public</span> <span class="n">IActionResult</span> <span class="nf">Get</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="nf">Ok</span><span class="p">(</span><span class="s">"Accès autorisé"</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="composant-blazor-webassembly"><span class="mr-2">Composant Blazor (WebAssembly)</span><a href="#composant-blazor-webassembly" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nf">@if</span> <span class="p">(</span><span class="n">estFonctionnaliteActive</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">&lt;</span><span class="n">div</span><span class="p">&gt;</span><span class="n">La</span> <span class="n">fonctionnalité</span> <span class="n">est</span> <span class="n">active</span><span class="p">.&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="n">Inject</span><span class="p">]</span> 
<span class="k">public</span> <span class="n">required</span> <span class="n">IFeatureManager</span> <span class="n">FeatureManager</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="k">private</span> <span class="kt">bool</span> <span class="n">estFonctionnaliteActive</span><span class="p">;</span>

<span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnInitializedAsync</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">estFonctionnaliteActive</span> <span class="p">=</span> <span class="k">await</span> <span class="n">FeatureManager</span><span class="p">.</span><span class="nf">IsEnabledAsync</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">FeatureFlags</span><span class="p">.</span><span class="n">NouvelleFonctionnalite</span><span class="p">));</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="redirection-conditionnelle-ex--vers-une-page-404"><span class="mr-2">Redirection conditionnelle (ex. : vers une page 404)</span><a href="#redirection-conditionnelle-ex--vers-une-page-404" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><pre><code class="language-razor">&lt;NotFound&gt;
    &lt;LayoutView Layout="@typeof(MainLayout)"&gt;
        &lt;PageNonTrouvee /&gt;
    &lt;/LayoutView&gt;
&lt;/NotFound&gt;
</code></pre><h2 id="autres-possibilités"><span class="mr-2">Autres possibilités</span><a href="#autres-possibilités" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Les interrupteurs ne se limitent pas à un simple état activé ou désactivé. Grâce aux filtres, il est possible d’introduire des comportements plus dynamiques et contextuels.</p><ul><li><a href="https://andrewlock.net/creating-dynamic-feature-flags-with-feature-filters-adding-feature-flags-to-an-asp-net-core-app-part-3/">Interrupteurs avancés</a> - Microsoft permet d’ajouter des filtres personnalisés comme une activation basée sur un utilisateur, une région, etc.<li><a href="https://andrewlock.net/creating-a-custom-feature-filter-adding-feature-flags-to-an-asp-net-core-app-part-4/">Interrupteurs personnalisés</a> - Vous pouvez créer vos propres filtres.</ul><h2 id="bonnes-pratiques"><span class="mr-2">Bonnes pratiques</span><a href="#bonnes-pratiques" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="utiliser-un-enum-pour-éviter-les-chaînes-magiques"><span class="mr-2">Utiliser un enum pour éviter les chaînes magiques</span><a href="#utiliser-un-enum-pour-éviter-les-chaînes-magiques" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copié!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">enum</span> <span class="n">FeatureFlags</span>
<span class="p">{</span>
    <span class="n">NouvelleFonctionnalite</span><span class="p">,</span>
    <span class="n">FonctionnaliteB</span>
<span class="p">}</span>

<span class="k">await</span> <span class="n">_featureManager</span><span class="p">.</span><span class="nf">IsEnabledAsync</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">FeatureFlags</span><span class="p">.</span><span class="n">NouvelleFonctionnalite</span><span class="p">));</span>
</pre></table></code></div></div><h3 id="faire-le-ménage-régulièrement-des-interrupteurs"><span class="mr-2">Faire le ménage régulièrement des interrupteurs</span><a href="#faire-le-ménage-régulièrement-des-interrupteurs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Les interrupteurs de fonctionnalité sont par nature temporaires. Une fois qu’une fonctionnalité est pleinement déployée ou qu’un test A/B est terminé, <strong>il est essentiel de retirer les interrupteurs associés du code et de la configuration</strong>.</p><p>Laisser des interrupteurs inactifs ou non utilisés peut nuire à la lisibilité, alourdir la maintenance, et introduire de l’incertitude dans les comportements attendus de l’application.</p><blockquote><p>💡 <strong>Astuce</strong> : tenez une liste des interrupteurs actifs avec leur date de création et l’objectif visé. Cela vous aidera à planifier leur retrait à temps.</p></blockquote><h3 id="comportement-personnalisé-lorsquune-action-est-désactivée"><span class="mr-2">Comportement personnalisé lorsqu’une action est désactivée</span><a href="#comportement-personnalisé-lorsquune-action-est-désactivée" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Par défaut, un contrôleur ou action désactivé retourne un HTTP 404.</p><p>Vous pouvez créer une classe personnalisée qui implémente <code class="language-plaintext highlighter-rouge">IDisabledFeaturesHandler</code> pour gérer un autre type de réponse.</p><blockquote><p>👉 Voir la <a href="https://github.com/microsoft/FeatureManagement-Dotnet#disabled-action-handling">documentation</a>.</p></blockquote><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Les interrupteurs de fonctionnalité sont un levier puissant pour améliorer l’agilité des équipes de développement, réduire les risques liés aux déploiements et faciliter l’expérimentation de nouvelles fonctionnalités. Leur intégration dans une application .NET est relativement simple grâce au support natif offert par Microsoft.FeatureManagement.</p><p>Cependant, comme tout outil, leur utilisation doit être encadrée par des bonnes pratiques : éviter l’accumulation d’interrupteurs obsolètes, documenter leur usage, et réfléchir à une stratégie de configuration adaptée à l’échelle du projet (locale, via App Configuration, ou centralisée).</p><p>Adopter les interrupteurs de fonctionnalité, c’est se donner les moyens de livrer plus rapidement, de manière plus sûre, et avec une meilleure maîtrise du changement. Commencez petit, expérimentez, et adaptez votre approche à vos besoins réels. L’essentiel est de rester intentionnel dans l’usage que vous en faites.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/outil-developpement/'>outil-developpement</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/dotnet/" class="post-tag no-text-decoration" >dotnet</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Cet article est sous licence <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> par l'auteur.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Partager</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Interrupteurs%20de%20fonctionnalit%C3%A9%20-%20CodeWithFrenchy&url=https%3A%2F%2Fcodewithfrenchy.github.io%2F%2Fposts%2Finterrupteur-fonctionnalite%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fcodewithfrenchy.github.io%2F%2Fposts%2Finterrupteur-fonctionnalite%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Interrupteurs%20de%20fonctionnalit%C3%A9%20-%20CodeWithFrenchy&u=https%3A%2F%2Fcodewithfrenchy.github.io%2F%2Fposts%2Finterrupteur-fonctionnalite%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copier le lien" data-title-succeed="Lien copié avec succès!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Récemment mis à jour</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/performances-jsonserializeroptions-singleton/">Amélioration des performances en utilisant JsonSerializerOptions en singleton</a><li><a href="/posts/source-generator-dotnet/">Les Générateurs de source</a><li><a href="/posts/guid-versus-id/">GUID vs ID auto-incrémenté - dilemme et solutions en environnement .NET distribué</a><li><a href="/posts/introduction-k6/">Introduction à K6</a><li><a href="/posts/redis-change-licence/">Redis change de licence ! Quelles répercussions pour les développeurs et les entreprises ?</a></ul></div><div id="access-tags"><div class="panel-heading">Tags tendance</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/conference/">conference</a> <a class="post-tag" href="/tags/essais/">essais</a> <a class="post-tag" href="/tags/source-generator/">source-generator</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet-core</a> <a class="post-tag" href="/tags/fluentassertions/">fluentassertions</a> <a class="post-tag" href="/tags/fluentvalidation/">fluentvalidation</a> <a class="post-tag" href="/tags/k6/">k6</a> <a class="post-tag" href="/tags/mapperly/">mapperly</a> <a class="post-tag" href="/tags/testcontainers/">testcontainers</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contenu</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Autres lectures</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/guid-versus-id/"><div class="card-body"> <em class="small" data-ts="1747674000" data-df="DD/MM/YYYY" > 19/05/2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>GUID vs ID auto-incrémenté - dilemme et solutions en environnement .NET distribué</h3><div class="text-muted small"><p> Préambule Je me souviens encore d’une réunion mouvementée avec un DBA, alors que nous discutions de l’architecture d’un nouveau système .NET réparti sur plusieurs services. Lorsque j’ai osé propos...</p></div></div></a></div><div class="card"> <a href="/posts/source-generator-dotnet/"><div class="card-body"> <em class="small" data-ts="1727647200" data-df="DD/MM/YYYY" > 29/09/2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Les Générateurs de source</h3><div class="text-muted small"><p> Les Source Generators (Générateurs de source) sont des outils intégrés au compilateur qui génèrent automatiquement du code source lors de la compilation, permettant aux développeurs d’automatiser l...</p></div></div></a></div><div class="card"> <a href="/posts/dotnet-conf-2024/"><div class="card-body"> <em class="small" data-ts="1733097600" data-df="DD/MM/YYYY" > 01/12/2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Retour sur .NET Conf 2024</h3><div class="text-muted small"><p> .NET 9 regorge de nouveautés pensées pour améliorer la performance, la lisibilité et offrir des outils modernes aux développeurs. Après une année à explorer les préversions, j’ai pris le temps de s...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/introduction-k6/" class="btn btn-outline-primary" prompt="Plus ancien"><p>Introduction à K6</p></a> <a href="/posts/redis-redevient-open-source/" class="btn btn-outline-primary" prompt="Plus récent"><p>Redis 8 - Un retour attendu à l’open source avec l’AGPLv3</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Tags tendance</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/conference/">conference</a> <a class="post-tag" href="/tags/essais/">essais</a> <a class="post-tag" href="/tags/source-generator/">source-generator</a> <a class="post-tag" href="/tags/aspnet-core/">aspnet-core</a> <a class="post-tag" href="/tags/fluentassertions/">fluentassertions</a> <a class="post-tag" href="/tags/fluentvalidation/">fluentvalidation</a> <a class="post-tag" href="/tags/k6/">k6</a> <a class="post-tag" href="/tags/mapperly/">mapperly</a> <a class="post-tag" href="/tags/testcontainers/">testcontainers</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/alexis35115">Alexis Garon-Michaud</a>. <span data-toggle="tooltip" data-placement="top" title="Sauf mention contraire, les articles de ce site sont publiés sous licence sous la licence Creative Commons Attribution 4.0 International (CC BY 4.0) par l'auteur.">Certains droits réservés.</span></p></div><div class="footer-right"><p class="mb-0">Propulsé par <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> avec le thème <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a></p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oups! Aucun résultat trouvé.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/fr.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
